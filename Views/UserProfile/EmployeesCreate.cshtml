@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@

@using Microsoft.AspNetCore.Http;
@using coreWeb.Controllers;
@{
    Layout = "~/Views/Shared/_Layoutprofile.cshtml";
    ViewData["Title"] = "UserInfo";

    int roleID = ViewBag.Role;
    var user = ViewBag.User;
    var timviec = ViewBag.TimViec;
    var ngld = ViewBag.NguoiLaoDong;
    var vitri = ViewBag.ViTriCongViec;
    var vanbang = ViewBag.VanBang;
    var tglamviec = ViewBag.TGLamViec;
    var nganhnghe = ViewBag.DMNganhNghe;
    var linhvuc = ViewBag.DMLinhVuc;
    var tinh = ViewBag.DMTinh;
    var huyen = ViewBag.DMHuyen;
    var tinhoc = ViewBag.TinHoc;
    var ngoaingu = ViewBag.NgoaiNgu;
    var xa = ViewBag.DMXa;
    var name = Context.Session.GetString("UserName");
    int? roleid = Context.Session.GetInt32("RoleId");
    int? userid = Context.Session.GetInt32("UserId");



}
<link href="~/Content/Assets/vendor/styles/bundle.css" rel="stylesheet" />
@*<script src="~/Content/Assets/vendor/scripts/bundle.js" type="text/javascript"></script>*@
<link rel="stylesheet" type="text/css" href="~/Content/Assets/ungvien/css/capnhathoso.css">
<link rel="stylesheet" type="text/css" href="~/Content/Assets/vendor/dropzone/dropzone.css">
<script src="~/Content/Assets/vendor/lib/Sortable.js"></script>
<script src="~/Content/Assets/vendor/dropzone/dropzone.js"></script>
<script src="~/Content/Assets/ungvien/js/capnhathoso.js"></script>
<link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
<script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>

<body class="themeCustom">
    <script src="~/Content/Assets/vendor/jquery/dist/jquery.js"></script>
    <script src="~/Content/Assets/vendor/sweetalert/lib/sweet-alert.min.js"></script>
    @*<script src="~/Content/Assets/vendor/jquery/function.js"></script>*@


    <style>
        .grecaptcha-badge {
            display: none !important;
        }
    </style>
    <div class="app layout-fixed-header">
        <!-- sidebar panel -->
        <div class="sidebar-panel offscreen-left">
            <div class="brand">
                <!-- logo -->
                <div class="brand-logo">
                    <div class="imgLogoNtd" id="imgLogoNtd">
                        <img src="~/Content/Assets/images/noimage.jpg">
                        @*<div>
                                <i class="fas fa-camera"></i>
                            </div>
                            <input class="fileAvatar" type="file" id="fileAvatar" accept="image/x-png,image/gif,image/jpeg">*@
                    </div>
                    <div class="brand-name">
                        @user.FullName
                    </div>
                    @{
                        @using (Html.BeginForm("Logout", "Home", FormMethod.Post))
                        {

                            <button class="" type="submit">
                                <i class="fas fa-sign-out"></i>
                                <span>Đăng xuất</span>
                            </button>
                        }
                    }
                </div>

                <!-- /logo -->
                <!-- toggle small sidebar menu -->
                <a href="javascript:;" class="hidden-lg hidden-md hidden-sm toggle-sidebar hidden-xs hamburger-icon v3" data-toggle="layout-small-menu">
                    <span></span>
                    <span></span>
                    <span></span>
                    <span></span>
                </a>
                <!-- /toggle small sidebar menu -->
            </div>
            <!-- main navigation -->
            <nav role="navigation" style="top: 265px" class="ps-container active open" data-ps-id="5df482b8-8b4a-5bbd-6466-4939bc5152c2">
                <ul class="nav">
                    <li class="active">
                        <a href="">
                            <i class="fas fa-tachometer-alt"></i>
                            <span>Tạo thông tin</span>
                        </a>
                    </li>

                    <li>

                    </li>
                </ul>
                <div class="ps-scrollbar-x-rail" style="left: 0px; bottom: 3px;"><div class="ps-scrollbar-x" style="left: 0px; width: 0px;"></div></div><div class="ps-scrollbar-y-rail" style="top: 0px; right: 0px;"><div class="ps-scrollbar-y" style="top: 0px; height: 0px;"></div></div>
            </nav>
            <!-- /main navigation -->
        </div>
        <!-- /sidebar panel -->
        <!-- content panel -->
        <div class="main-panel">
            <!-- top header -->
            <header class="header navbar">
                <div class="brand visible-xs">
                    <!-- toggle offscreen menu -->
                    <div class="toggle-offscreen">
                        <a href="#" class="hamburger-icon visible-xs" data-toggle="offscreen" data-move="ltr">
                            <span></span>
                            <span></span>
                            <span></span>
                        </a>
                    </div>

                </div>
                <ul class="nav navbar-nav">
                    <li class="menu-support">
                        <img class="hidden-xs" src="">
                        <div>
                            Hỗ trợ, tư vấn dành cho ứng viên.
                            <br>
                            <i class="fal fa-phone-alt"></i> <a href="tel: ">(0272) 3871 711 - 3635 223</a>
                            <i class="fal fa-envelope" style="margin-left: 10px"></i> <a href="mailto:vieclam@vieclamlongan.vn">vieclam@vieclamlongan.vn</a>
                        </div>
                    </li>
                </ul>
                <ul class="nav navbar-nav navbar-right">
                    <li class="menu-ntd">
                        <a href="/">
                            <i class="fal fa-home-alt"></i>
                            <br>
                            Trang chủ
                        </a>
                    </li>
                    @*<li class="menu-ntd">
                            <a href="/UserProfile/EmployeesCV?userId=@userid&roleId=@roleid">
                                <i class="fal fa-id-card"></i>
                                <br>
                                Tạo cv
                            </a>
                        </li>*@
                    <li class="menu-ntd">
                        <a href="/TuyenDung">
                            <i class="fal fa-briefcase"></i>
                            <br>
                            Việc làm mới
                        </a>
                    </li>
                    @*<li class="menu-ntd">
                            <a href="/UserProfile/EditProfileEmployees?userId=@userid&roleId=@roleid">
                                <i class="fal fa-clipboard-user"></i>
                                <br>
                                Cập nhật hồ sơ
                            </a>
                        </li>*@
                    @*<li class="menu-ntd">
                            <a href="javascript:void(0)" class="preview-cv">
                                <i class="fal fa-user-check"></i>
                                <br>
                                Xem hồ sơ
                            </a>
                        </li>*@

                </ul>
            </header>
            <!-- /top header -->
            <style>
                .alert {
                    margin-bottom: 10px;
                }
            </style>
            <!-- main area -->
            <div class="main-content">

                <div id="panelContent">
                    <div class="panel">
                        <div class="panel-heading">
                            <span>Tạo thông tin người lao động</span>
                        </div>
                        <div class="panel-body">
                            <div class="row">
                                @using (Html.BeginForm("AddNewNLD", "UserProfile", FormMethod.Post))
                                {


                                    <div class="col-md-6 col-sm-6 col-xs-12 mb20">
                                        <label class="control-label">Họ tên: <span class="required">(*)</span> </label>
                                        <div class="">
                                            <input type="text" name="HoTen" id="HoTen" class="form-control" value="@user.FullName" required placeholder="Họ tên của bạn">
                                        </div>
                                    </div>
                                    <div class="col-md-6 col-sm-6 col-xs-12 mb20">
                                        <label class="control-label">Email: <span class="required">(*)</span> </label>
                                        <div class="">
                                            <input type="email" name="Email" id="Email" class="form-control" placeholder="@user.UserName" value="@user.UserName" required>
                                        </div>
                                    </div>
                                    <div class="col-md-6 col-sm-6 col-xs-12 mb20">
                                        <label class="control-label">Số điện thoại: <span class="required">(*)</span> </label>
                                        <div class="">
                                            <input type="text" name="Phone" id="Phone" minlength="10" maxlength="10" class="form-control onlyNum" placeholder="Số điện thoại" required>
                                        </div>
                                    </div>
                                    <div class="col-md-6 col-sm-6 col-xs-12 mb20">
                                        <label class="control-label">Ngày sinh: <span class="required">(*)</span> </label>
                                        <div class="">
                                            <input type="date" name="NgaySinh" id="NgaySinh" class="form-control" value="" placeholder="Ngày sinh" required>
                                        </div>
                                    </div>
                                    <div class="col-md-6 col-sm-6 col-xs-12 mb20">
                                        <label class="control-label">Địa chỉ: <span class="required">(*)</span> </label>
                                        <div class="">
                                            <input type="text" name="DiaChi" id="DiaChi" class="form-control" placeholder="Địa chỉ" required>
                                        </div>
                                    </div>
                                    <div class="col-md-6 col-sm-6 col-xs-12 mb20 checkbo">
                                        <label class="control-label pt5" style="display: inline-block">
                                            Giới tính: <span class="required">(*)</span>

                                        </label>
                                        <div class="">
                                            <input id="1" type="radio" name="GioiTinh" value="1" style="margin-left:10px" checked><label for="1" class="role_name" style="margin-right:10px">Nam</label>
                                            <input id="2" type="radio" name="GioiTinh" value="2"><label for="2" class="role_name">Nữ</label>
                                        </div>
                                    </div>
                                    <div class="col-md-6 col-sm-6 col-xs-12 mb20">
                                        <label class="control-label">CMND/CCCD: <span class="required">(*)</span> </label>
                                        <div class="">
                                            <input type="text" name="SoDinhDanh" id="SoDinhDanh" class="form-control" placeholder="CMND/CCCD" required>
                                        </div>
                                    </div>
                                    @*<div class="col-md-6 col-sm-6 col-xs-12 mb20">
                                            <label class="control-label"><span>*</span> Ngày cấp:</label>
                                            <div class="">
                                                <input type="date" name="ngaycap" id="ngaycao" class="form-control" placeholder="Ngày Cấp" required>
                                            </div>
                                        </div>
                                        <div class="col-md-6 col-sm-6 col-xs-12 mb20">
                                            <label class="control-label"><span>*</span> Nơi cấp:</label>
                                            <div class="">
                                                <input type="text" name="noicap" id="noicap" class="form-control" placeholder="Nơi cấp" required>
                                            </div>
                                        </div>*@
                                    <div class="col-md-6 col-sm-6 col-xs-12 mb20">
                                        <label class="control-label">Tỉnh: <span class="required">(*)</span> </label>

                                        <select class="question-select1 selectFilter form-control tinhes" style="border-radius:0px;" name="tinh" id="ddlProvince" required>
                                            @*<option value="">Chọn tỉnh</option>
                                                @{
                                                    for (int i = 0; i < tinh.Count; i++)
                                                    {
                                                        <option value="@tinh[i].Id" class="childAttr">@tinh[i].TenTinh</option>
                                                    }
                                                }*@
                                        </select>


                                    </div>
                                    <div class="col-md-6 col-sm-6 col-xs-12 mb20">
                                        <label class="control-label">Huyện: <span class="required">(*)</span> </label>

                                        <select class="question-select1 selectFilter form-control" style="border-radius:0px;" name="huyen" id="ddlDistrict" required>
                                            <option value="">--Chọn huyện--</option>
                                            @*@{
                                                    for (int i = 0; i < huyen.Count; i++)
                                                    {
                                                        <option value="@huyen[i].Id" class="childAttr">@huyen[i].TenHuyen</option>
                                                    }
                                                }*@
                                        </select>

                                    </div>
                                    <div class="col-md-6 col-sm-6 col-xs-12 mb20">
                                        <label class="control-label">Xã: <span class="required">(*)</span> </label>

                                        <select class="question-select1 selectFilter form-control" style="border-radius:0px;" name="xa" id="ddlWard" required>
                                            <option value="">--Chọn xã--</option>
                                            @*@{
                                                    for (int i = 0; i < xa.Count; i++)
                                                    {
                                                        <option value="@xa[i].Id" class="childAttr">@xa[i].TenXa</option>
                                                    }
                                                }*@
                                        </select>

                                    </div>
                                    <div class="text-center">
                                        <button class="btn btn-primary" id="btnSub">
                                            <i class="fad fa-check-circle"></i> Tạo
                                        </button>
                                    </div>
                                }


                            </div>
                        </div>
                    </div>
                    <script>
                        //$('#frmEditInfo .checkbo').checkBo();
                        //$('#frmEditInfo').submit(function () {
                        //    btnlinkload($('#btnSub'));
                        //    $.post(URL_ROOT + "ung-vien/taikhoan/updateInfo", $(this).serializeArray(), function (r) {
                        //        btnlinkthanhcong($('#btnSub'), '<i class="fad fa-check-circle"></i> Cập nhật');
                        //        if (r.status == 1) {
                        //            call_noti('Cập nhật thành công', 'success');
                        //            sdtUser = '+84' + $('#phoneNumInfo').val().replace(/^0/, '');
                        //            updateDiem(r.diem);

                        //            $("html, body").animate({ scrollTop: 0 }, '150');
                        //            $('.wizard-nav a[data-type="info"] .notYet').remove();
                        //        } else if (r.status == 2) {
                        //            swal({
                        //                title: 'Cập nhật thất bại',
                        //                text: r.message,
                        //                type: 'error',
                        //                showCancelButton: false,
                        //                confirmButtonColor: '#DD6B55',
                        //                confirmButtonText: 'OK',
                        //                closeOnConfirm: true
                        //            },
                        //                function () {

                        //                });
                        //        } else {
                        //            swal({
                        //                title: 'Cập nhật thất bại',
                        //                text: r.message + '\nVui lòng liên hệ quản trị viên để biết thêm.',
                        //                type: 'error',
                        //                showCancelButton: false,
                        //                confirmButtonColor: '#DD6B55',
                        //                confirmButtonText: 'OK',
                        //                closeOnConfirm: true
                        //            },
                        //                function () {

                        //                });
                        //        }
                        //    }, 'JSON');
                        //    return false;
                        //});
                    </script>
                </div>

            </div>
            <!-- /main area -->
        </div>
        <!-- /content panel -->
        <script src="https://vieclamcantho.com.vn/view/ungvien/index/js/index.js" type="text/javascript"></script><!-- bottom footer -->
        <footer class="content-footer hidden-xs">
            <nav class="footer-left">
                <ul class="nav">
                    <li>
                        <a href="javascript:;">
                            Copyright <i class="fa fa-copyright"></i> <span>VNPT Long An | https://shop.vnptlongan.vn/ </span>
                            2021
                        </a>
                    </li>
                </ul>
            </nav>
        </footer>
        <!-- /bottom footer -->
    </div>


    <script type="text/javascript" src="~/Content/Assets/ungvien/js/bundle.js"></script>
    <script type="text/javascript" src="~/Content/Assets/ungvien/js/capnhathoso.js"></script>

    <div id="rememberry__extension__root" style="all: unset;"></div>
</body>
<script>
    var provinceUrl = "/UserProfile/GetAllProvinceByCountryId";
    var districtUrl = "/UserProfile/GetAllDistrictByProvinceId";
    var wardUrl = "/UserProfile/GetAllWardByDistrictId";
    $(document).ready(function () {
        // load danh sách country

        _getProvince();

        $("#ddlProvince").on('change', function () {
            var id = $(this).val();
            if (id != undefined && id != '') {
                _getDistrict(id);
                _getWard(id);
            }
        });
        $("#ddlDistrict").on('change', function () {
            var id = $(this).val();
            if (id != undefined && id != '') {
                _getWard(id);
            }
        });
        $("#ddlWard").on('change', function () {

            var provinceText = $("#ddlProvince option:selected").text();
            var districtText = $("#ddlDistrict option:selected").text();
            var wardText = $("#ddlWard option:selected").text();
            var html = " Tỉnh thành: " + provinceText + " " + "Quận huyện: " + districtText + " " + "Xã phường: " + wardText;

            $("#divResult").html(html);
        });
    });

    // truyền id của country vào
    function _getProvince() {
        $.get(provinceUrl, function (data) {
            if (data != null && data != undefined && data.length) {
                var html = '';
                html += '<option value="">--Chọn tỉnh--</option>';
                $.each(data, function (key, item) {
                    html += '<option value=' + item.Id + '>' + item.TenTinh + '</option>';
                });
                $("#ddlProvince").html(html);
            }
        });
    }
    // truyền id của province vào
    function _getDistrict(id) {
        $.get(districtUrl + "?id=" + id, function (data) {
            if (data != null && data != undefined && data.length) {
                var html = '';
                html += '<option value="">--Chọn huyện--</option>';
                $.each(data, function (key, item) {
                    html += '<option value=' + item.Id + '>' + item.TenHuyen + '</option>';
                });
                $("#ddlDistrict").html(html);
            }
        });
    }
    // truyền id của district vào
    function _getWard(id) {
        $.get(wardUrl + "?id=" + id, function (data) {
            if (data != null && data != undefined && data.length) {
                var html = '';
                html += '<option value="">--Chọn xã--</option>';
                $.each(data, function (key, item) {
                    html += '<option value=' + item.Id + '>' + item.TenXa + '</option>';
                });
                $("#ddlWard").html(html);
            }
        });
    }

    $(document).ready(function () {
        $('.tinhes').select2({

        });
    });
</script>
