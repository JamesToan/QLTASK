@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@
@using Microsoft.AspNetCore.Http;
@using coreWeb.Controllers;
@{
    Layout = "~/Views/Shared/_Layoutprofile.cshtml";
    ViewData["Title"] = "UserInfo";
    var user = ViewBag.User;
    var doanhnghiep = ViewBag.DoanhNghiep;
    var nganhnghe = ViewBag.NganhNghe;
    var vitri = ViewBag.ViTri;
    var gioitinh = ViewBag.GioiTinh;
    var mucluong = ViewBag.MucLuong;
    var thoigian = ViewBag.ThoiGian;
    var dmtinh = ViewBag.DMTinh;
    var dmhuyen = ViewBag.DMHuyen;
    var name = Context.Session.GetString("UserName");
    int? roleid = Context.Session.GetInt32("RoleId");
    int? userid = Context.Session.GetInt32("UserId");
}

<link href="~/Content/Assets/vendor/styles/bundle.css" rel="stylesheet" />
<link rel="stylesheet" type="text/css" href="~/Content/Assets/ungvien/css/capnhathoso.css">
<link rel="stylesheet" type="text/css" href="~/Content/Assets/vendor/dropzone/dropzone.css">
<script src="~/Content/Assets/vendor/lib/Sortable.js"></script>
<script src="~/Content/Assets/vendor/dropzone/dropzone.js"></script>

<link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
<script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>

<body class="themeCustom">
    <script src="~/Content/Assets/vendor/jquery/dist/jquery.js"></script>
    <script src="~/Content/Assets/vendor/sweetalert/lib/sweet-alert.min.js"></script>


    <style>
        .grecaptcha-badge {
            display: none !important;
        }
    </style>
    <div class="app layout-fixed-header">
        <!-- sidebar panel -->
        <div class="sidebar-panel offscreen-left">
            <div class="brand">
                <!-- logo -->
                <div class="brand-logo">
                    <div class="imgLogoNtd" id="imgLogoNtd">
                        <img src="~/Content/Assets/images/noimage.jpg">
                        @*<div>
                                <i class="fas fa-camera"></i>
                            </div>
                            <input class="fileAvatar" type="file" id="fileAvatar" accept="image/x-png,image/gif,image/jpeg">*@
                    </div>
                    <div class="brand-name">
                        @user.FullName
                    </div>
                    @{
                        @using (Html.BeginForm("Logout", "Home", FormMethod.Post))
                        {

                            <button class="" type="submit">
                                <i class="fas fa-sign-out"></i>
                                <span>Đăng xuất</span>
                            </button>
                        }
                    }
                </div>

                <!-- /logo -->
                <!-- toggle small sidebar menu -->
                <a href="javascript:;" class="hidden-lg hidden-md hidden-sm toggle-sidebar hidden-xs hamburger-icon v3" data-toggle="layout-small-menu">
                    <span></span>
                    <span></span>
                    <span></span>
                    <span></span>
                </a>
                <!-- /toggle small sidebar menu -->
            </div>
            <!-- main navigation -->
            <nav role="navigation" style="top: 265px" class="ps-container active open" data-ps-id="5df482b8-8b4a-5bbd-6466-4939bc5152c2">
                <ul class="nav">
                    <li class="active">
                        <a href="/UserProfile/Employers">
                            <i class="fas fa-tachometer-alt"></i>
                            <span>Quản lý chung</span>
                        </a>
                    </li>

                    <li class="">
                        <a href="/UserProfile/ChangePasswordEmployer">
                            <i class="fas fa-unlock-alt"></i>
                            <span>Đổi mật khẩu</span>
                        </a>
                    </li>
                </ul>
                <div class="ps-scrollbar-x-rail" style="left: 0px; bottom: 3px;"><div class="ps-scrollbar-x" style="left: 0px; width: 0px;"></div></div><div class="ps-scrollbar-y-rail" style="top: 0px; right: 0px;"><div class="ps-scrollbar-y" style="top: 0px; height: 0px;"></div></div>
            </nav>
            <!-- /main navigation -->
        </div>
        <!-- /sidebar panel -->
        <!-- content panel -->
        <div class="main-panel">
            <!-- top header -->
            <header class="header navbar">
                <div class="brand visible-xs">
                    <!-- toggle offscreen menu -->
                    <div class="toggle-offscreen">
                        <a href="#" class="hamburger-icon visible-xs" data-toggle="offscreen" data-move="ltr">
                            <span></span>
                            <span></span>
                            <span></span>
                        </a>
                    </div>

                </div>
                <ul class="nav navbar-nav">
                    <li class="menu-support">
                        <img class="hidden-xs" src="">
                        <div>
                            Hỗ trợ, tư vấn dành cho ứng viên.
                            <br>
                            <i class="fal fa-phone-alt"></i> <a href="tel: ">(0272) 3871 711 - 3635 223</a>
                            <i class="fal fa-envelope" style="margin-left: 10px"></i> <a href="mailto:vieclam@vieclamlongan.vn">vieclam@vieclamlongan.vn</a>
                        </div>
                    </li>
                </ul>
                <ul class="nav navbar-nav navbar-right">
                    <li class="menu-ntd">
                        <a href="/">
                            <i class="fal fa-home-alt"></i>
                            <br>
                            Trang chủ
                        </a>
                    </li>
                    <li class="menu-ntd">
                        <a href="#">
                            <i class="fal fa-id-card"></i>
                            <br>
                            Tạo hồ sơ tuyển dụng
                        </a>
                    </li>

                    <li class="menu-ntd">
                        <a href="/UserProfile/EditDoanhNghiep">
                            <i class="fal fa-id-card"></i>
                            <br>
                            Cập nhật hồ sơ doanh nghiệp
                        </a>
                    </li>

                </ul>
            </header>
            <!-- /top header -->
            <style>
                .alert {
                    margin-bottom: 10px;
                }
            </style>
            <!-- main area -->
            <div class="main-content">

                <div id="panelContent">
                    <div class="panel">
                        <div class="panel-heading">
                            <span>Tạo hồ sơ tuyển dụng</span>
                        </div>
                        <div class="panel-body">
                            <div class="row">
                                @using (Html.BeginForm("CreateHSTD", "UserProfile", FormMethod.Post))
                                {

                                    <div class="col-md-6 col-sm-6 col-xs-12 mb20">
                                        <label class="control-label">Tên công việc: <span class="required">(*)</span></label>
                                        <div class="">
                                            <input type="text" name="tcviec" id="tcviec" class="form-control" placeholder="Tên công việc" required>
                                        </div>
                                    </div>
                                    <div class="col-md-6 col-sm-6 col-xs-12 mb20">
                                        <label class="control-label">Tên doanh nghiệp: <span class="required">(*)</span></label>
                                        <div class="">
                                            <input type="text" name="dnname" id="dnname" class="form-control" required value="@doanhnghiep.TenDoanhNghiep" readonly>
                                        </div>
                                    </div>

                                    <div class="col-md-6 col-sm-6 col-xs-12 mb20">
                                        <label class="control-label">Ngành nghề:<span class="required">(*)</span></label>
                                        <div class="">
                                            <select class="question-select1 selectFilter nganhnghese" style="border-radius:0px;" name="nganhnghe" id="nganhnghe" size="1" tabindex="-1" required>
                                                <option value="">Chọn ngành nghề</option>
                                                @{
                                                    for (int i = 0; i < nganhnghe.Count; i++)
                                                    {
                                                        <option value="@nganhnghe[i].Id" class="childAttr">@nganhnghe[i].TenNganhNghe</option>
                                                    }
                                                }
                                            </select>
                                        </div>
                                    </div>
                                    <div class="col-md-6 col-sm-6 col-xs-12 mb20">
                                        <label class="control-label">Vị trí công việc:<span class="required">(*)</span></label>
                                        <div class="">
                                            <select class="question-select1 selectFilter" style="border-radius:0px;" name="vtcv" id="vtcv" size="1" tabindex="-1" required>
                                                <option value="">Chọn vị trí</option>
                                                @{
                                                    for (int i = 0; i < vitri.Count; i++)
                                                    {
                                                        <option value="@vitri[i].Id" class="childAttr">@vitri[i].TenViTriCongViec</option>
                                                    }
                                                }
                                            </select>
                                        </div>
                                    </div>
                                    <div class="col-md-6 col-sm-6 col-xs-12 mb20">
                                        <label class="control-label">Số lượng: <span class="required">(*)</span></label>
                                        <div class="">
                                            <input type="number" name="soluong" id="soluong" class="form-control " placeholder="Số lượng" required>
                                        </div>
                                    </div>
                                    <div class="col-md-6 col-sm-6 col-xs-12 mb20">
                                        <label class="control-label">Giới tính: <span class="required">(*)</span></label>
                                        <div class="">
                                            <select class="question-select1 selectFilter" style="border-radius:0px;" name="gioitinh" id="gioitinh" size="1" tabindex="-1" required>
                                                <option value="">Chọn giới tính</option>
                                                @{
                                                    for (int i = 0; i < gioitinh.Count; i++)
                                                    {
                                                        <option value="@gioitinh[i].Id" class="childAttr">@gioitinh[i].TenGioiTinh</option>
                                                    }
                                                }
                                            </select>
                                        </div>
                                    </div>
                                    <div class="col-md-6 col-sm-6 col-xs-12 mb20">
                                        <label class="control-label">Tuổi từ:<span class="required">(*)</span></label>
                                        <div class="">
                                            <input type="number" name="tuoitu" id="tuoitu" class="form-control" placeholder="Tuổi từ" required>
                                        </div>
                                    </div>
                                    <div class="col-md-6 col-sm-6 col-xs-12 mb20">
                                        <label class="control-label">Tuổi đến:<span class="required">(*)</span></label>
                                        <div class="">
                                            <input type="number" name="tuoiden" id="tuoiden" minlength="10" maxlength="10" class="form-control onlyNum" placeholder="Tuổi đến" required>
                                        </div>
                                    </div>
                                    <div class="col-md-6 col-sm-6 col-xs-12 mb20">
                                        <label class="control-label">Mức lương: <span class="required">(*)</span></label>
                                        <div class="">
                                            <select class="question-select1 selectFilter" style="border-radius:0px;" name="mucluong" id="mucluong" size="1" tabindex="-1" required>
                                                <option value="">Chọn mức lương</option>
                                                @{
                                                    for (int i = 0; i < mucluong.Count; i++)
                                                    {
                                                        <option value="@mucluong[i].Id" class="childAttr">@mucluong[i].TenMucLuong</option>
                                                    }
                                                }
                                            </select>
                                        </div>
                                    </div>
                                    <div class="col-md-6 col-sm-6 col-xs-12 mb20">
                                        <label class="control-label">Nơi làm việc: <span class="required">(*)</span></label>
                                        <div class="">
                                            <input type="text" name="nlviec" id="nlviec" class="form-control" placeholder="Nơi làm việc" required>
                                        </div>
                                    </div>

                                    <div class="col-md-6 col-sm-6 col-xs-12 mb20">
                                        <label class="control-label">Tỉnh: <span class="required">(*)</span></label>
                                        <div class="">
                                            <select class="question-select1 selectFilter tinhes" style="border-radius:0px;" name="tinh" id="ddlProvince" required>
                                                <option value="">--Chọn tỉnh--</option>
                                                @*@{
                                                        for (int i = 0; i < dmtinh.Count; i++)
                                                        {
                                                            <option value="@dmtinh[i].Id" class="childAttr">@dmtinh[i].TenTinh</option>
                                                        }
                                                    }*@
                                            </select>
                                        </div>
                                    </div>
                                    <div class="col-md-6 col-sm-6 col-xs-12 mb20">
                                        <label class="control-label">Huyện: <span class="required">(*)</span></label>
                                        <div class="">
                                            <select class="question-select1 selectFilter" style="border-radius:0px;" name="huyen" id="ddlDistrict" required>
                                                <option value="">--Chọn huyện--</option>
                                                @*@{
                                                        for (int i = 0; i < dmhuyen.Count; i++)
                                                        {
                                                            <option value="@dmhuyen[i].Id" class="childAttr">@dmhuyen[i].TenHuyen</option>
                                                        }
                                                    }*@
                                            </select>
                                        </div>
                                    </div>
                                    <div class="col-md-6 col-sm-6 col-xs-12 mb20">
                                        <label class="control-label">Thời gian làm việc: <span class="required">(*)</span></label>
                                        <div class="">
                                            <select class="question-select1 selectFilter" style="border-radius:0px;" name="thoigian" id="thoigian" size="1" tabindex="-1" required>
                                                <option value="">Chọn thời gian</option>
                                                @{
                                                    for (int i = 0; i < thoigian.Count; i++)
                                                    {
                                                        <option value="@thoigian[i].Id" class="childAttr">@thoigian[i].TenThoiGianLamViec</option>
                                                    }
                                                }
                                            </select>
                                        </div>
                                    </div>
                                    <div class="col-md-6 col-sm-6 col-xs-12 mb20">
                                        <label class="control-label">Hạn nộp: </label>
                                        <div class="">
                                            <input type="date" name="hannop" id="hannop" class="form-control" placeholder="Hạn nộp">
                                        </div>
                                    </div>
                                    <div class="col-md-6 col-sm-6 col-xs-12 mb20">
                                        <label class="control-label"><span>*</span>Mô tả công việc:</label>
                                        <div class="">
                                            <textarea name="mota" id="mota" class="form-control" placeholder="Mô tả công việc"></textarea>
                                        </div>
                                    </div>

                                    <div class="col-md-6 col-sm-6 col-xs-12 mb20">
                                        <label class="control-label">Yêu cầu: </label>
                                        <div class="">
                                            <textarea name="yeucau" id="yeucau" class="form-control" placeholder="Yêu cầu"></textarea>
                                        </div>
                                    </div>
                                    <div class="col-md-6 col-sm-6 col-xs-12 mb20">
                                        <label class="control-label">Kinh nghiệm: <span class="required">(*)</span></label>
                                        <div class="">
                                            <input type="text" name="kinhnghiem" id="kinhnghiem" class="form-control" placeholder="Kinh nghiệm">
                                        </div>
                                    </div>

                                    <div class="col-md-6 col-sm-6 col-xs-12 mb20">
                                        <label class="control-label">Phúc Lợi:</label>
                                        <div class="">
                                            <input type="text" name="phucloi" id="phucloi" class="form-control" placeholder="Phúc Lợi">
                                        </div>
                                    </div>

                                    <div class="text-center">
                                        <button class="btn btn-primary" id="btnSub">
                                            <i class="fad fa-check-circle"></i> Tạo
                                        </button>
                                    </div>
                                }


                            </div>
                        </div>
                    </div>
                    <script>
                        //$('#frmEditInfo .checkbo').checkBo();
                        //$('#frmEditInfo').submit(function () {
                        //    btnlinkload($('#btnSub'));
                        //    $.post(URL_ROOT + "ung-vien/taikhoan/updateInfo", $(this).serializeArray(), function (r) {
                        //        btnlinkthanhcong($('#btnSub'), '<i class="fad fa-check-circle"></i> Cập nhật');
                        //        if (r.status == 1) {
                        //            call_noti('Cập nhật thành công', 'success');
                        //            sdtUser = '+84' + $('#phoneNumInfo').val().replace(/^0/, '');
                        //            updateDiem(r.diem);

                        //            $("html, body").animate({ scrollTop: 0 }, '150');
                        //            $('.wizard-nav a[data-type="info"] .notYet').remove();
                        //        } else if (r.status == 2) {
                        //            swal({
                        //                title: 'Cập nhật thất bại',
                        //                text: r.message,
                        //                type: 'error',
                        //                showCancelButton: false,
                        //                confirmButtonColor: '#DD6B55',
                        //                confirmButtonText: 'OK',
                        //                closeOnConfirm: true
                        //            },
                        //                function () {

                        //                });
                        //        } else {
                        //            swal({
                        //                title: 'Cập nhật thất bại',
                        //                text: r.message + '\nVui lòng liên hệ quản trị viên để biết thêm.',
                        //                type: 'error',
                        //                showCancelButton: false,
                        //                confirmButtonColor: '#DD6B55',
                        //                confirmButtonText: 'OK',
                        //                closeOnConfirm: true
                        //            },
                        //                function () {

                        //                });
                        //        }
                        //    }, 'JSON');
                        //    return false;
                        //});
                    </script>
                </div>

            </div>
            <!-- /main area -->
        </div>
        <!-- /content panel -->

        <footer class="content-footer hidden-xs">
            <nav class="footer-left">
                <ul class="nav">
                    <li>
                        <a href="javascript:;">
                            Copyright <i class="fa fa-copyright"></i> <span>VNPT Long An | https://shop.vnptlongan.vn/ </span>
                            2021
                        </a>
                    </li>
                </ul>
            </nav>
        </footer>
        <!-- /bottom footer -->
    </div>


    <script type="text/javascript" src="~/Content/Assets/ungvien/js/bundle.js"></script>
    <script type="text/javascript" src="~/Content/Assets/ungvien/js/capnhathoso.js"></script>

    <div id="rememberry__extension__root" style="all: unset;"></div>
</body>
<script>
    var provinceUrl = "/UserProfile/GetAllProvinceByCountryId";
    var districtUrl = "/UserProfile/GetAllDistrictByProvinceId";
    var wardUrl = "/UserProfile/GetAllWardByDistrictId";
    $(document).ready(function () {
        // load danh sách country

        _getProvince();

        $("#ddlProvince").on('change', function () {
            var id = $(this).val();
            if (id != undefined && id != '') {
                _getDistrict(id);
                _getWard(id);
            }
        });
        $("#ddlDistrict").on('change', function () {
            var id = $(this).val();
            if (id != undefined && id != '') {
                _getWard(id);
            }
        });
        //$("#ddlWard").on('change', function () {

        //    var provinceText = $("#ddlProvince option:selected").text();
        //    var districtText = $("#ddlDistrict option:selected").text();
        //    var wardText = $("#ddlWard option:selected").text();
        //    var html = " Tỉnh thành: " + provinceText + " " + "Quận huyện: " + districtText + " " + "Xã phường: " + wardText;

        //    $("#divResult").html(html);
        //});
    });
    // truyền id của country vào
    function _getProvince() {
        $.get(provinceUrl, function (data) {
            if (data != null && data != undefined && data.length) {
                var html = '';
                html += '<option value="">--Chọn tỉnh--</option>';
                $.each(data, function (key, item) {
                    html += '<option value=' + item.Id + '>' + item.TenTinh + '</option>';
                });
                $("#ddlProvince").html(html);
            }
        });
    }
    // truyền id của province vào
    function _getDistrict(id) {
        $.get(districtUrl + "?id=" + id, function (data) {
            if (data != null && data != undefined && data.length) {
                var html = '';
                html += '<option value="">--Chọn huyện--</option>';
                $.each(data, function (key, item) {
                    html += '<option value=' + item.Id + '>' + item.TenHuyen + '</option>';
                });
                $("#ddlDistrict").html(html);
            }
        });
    }

    $(document).ready(function () {
        $('.nganhnghese').select2({

        });
    });

    $(document).ready(function () {
        $('.tinhes').select2({

        });
    });
</script>
