@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@

@using Microsoft.AspNetCore.Http;
@using coreWeb.Controllers;
@{
    Layout = "~/Views/Shared/_Layoutprofile.cshtml";
    ViewData["Title"] = "UserInfo";

    int roleID = ViewBag.Role;
    var user = ViewBag.User;
    var timviec = ViewBag.TimViec;
    var ngld = ViewBag.NguoiLaoDong;
    var vitri = ViewBag.ViTriCongViec;
    var vanbang = ViewBag.VanBang;
    var tglamviec = ViewBag.TGLamViec;
    var nganhnghe = ViewBag.DMNganhNghe;
    var linhvuc = ViewBag.DMLinhVuc;
    var tinh = ViewBag.DMTinh;
    var huyen = ViewBag.DMHuyen;
    var tinhoc = ViewBag.TinHoc;
    var ngoaingu = ViewBag.NgoaiNgu;
    var xa = ViewBag.DMXa;
    var loaihinh = ViewBag.LoaiHinh;
    var nganhkinhte = ViewBag.NganhKT;
    var kcn = ViewBag.KCN;
    var doanhnghiep = ViewBag.DoanhNghiepnow;
    var name = Context.Session.GetString("UserName");
    int? roleid = Context.Session.GetInt32("RoleId");
    int? userid = Context.Session.GetInt32("UserId");



}
<link href="~/Content/Assets/vendor/styles/bundle.css" rel="stylesheet" />
@*<script src="~/Content/Assets/vendor/scripts/bundle.js" type="text/javascript"></script>*@
<link rel="stylesheet" type="text/css" href="~/Content/Assets/ungvien/css/capnhathoso.css">
<link rel="stylesheet" type="text/css" href="~/Content/Assets/vendor/dropzone/dropzone.css">
<script src="~/Content/Assets/vendor/lib/Sortable.js"></script>
<script src="~/Content/Assets/vendor/dropzone/dropzone.js"></script>
@*<script src="~/Content/Assets/ungvien/js/capnhathoso.js"></script>*@

<link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
<script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>

<body class="themeCustom">
    <script src="~/Content/Assets/vendor/jquery/dist/jquery.js"></script>
    <script src="~/Content/Assets/vendor/sweetalert/lib/sweet-alert.min.js"></script>
    @*<script src="~/Content/Assets/vendor/jquery/function.js"></script>*@


    <style>
        .grecaptcha-badge {
            display: none !important;
        }
    </style>
    <div class="app layout-fixed-header">
        <!-- sidebar panel -->
        <div class="sidebar-panel offscreen-left">
            <div class="brand">
                <!-- logo -->
                <div class="brand-logo">
                    <div class="imgLogoNtd" id="imgLogoNtd">
                        <img src="~/Content/Assets/images/noimage.jpg">
                        @*<div>
                                <i class="fas fa-camera"></i>
                            </div>
                            <input class="fileAvatar" type="file" id="fileAvatar" accept="image/x-png,image/gif,image/jpeg">*@
                    </div>
                    <div class="brand-name">
                        @user.FullName
                    </div>
                    @{
                        @using (Html.BeginForm("Logout", "Home", FormMethod.Post))
                        {

                            <button class="" type="submit">
                                <i class="fas fa-sign-out"></i>
                                <span>Đăng xuất</span>
                            </button>
                        }
                    }
                </div>

                <!-- /logo -->
                <!-- toggle small sidebar menu -->
                <a href="javascript:;" class="hidden-lg hidden-md hidden-sm toggle-sidebar hidden-xs hamburger-icon v3" data-toggle="layout-small-menu">
                    <span></span>
                    <span></span>
                    <span></span>
                    <span></span>
                </a>
                <!-- /toggle small sidebar menu -->
            </div>
            <!-- main navigation -->
            <nav role="navigation" style="top: 265px" class="ps-container active open" data-ps-id="5df482b8-8b4a-5bbd-6466-4939bc5152c2">
                <ul class="nav">
                    <li class="active">
                        <a href="/UserProfile/Employers">
                            <i class="fas fa-tachometer-alt"></i>
                            <span>Quản lý chung</span>
                        </a>
                    </li>

                    <li class="">
                        <a href="/UserProfile/ChangePasswordEmployer">
                            <i class="fas fa-unlock-alt"></i>
                            <span>Đổi mật khẩu</span>
                        </a>
                    </li>
                </ul>
                <div class="ps-scrollbar-x-rail" style="left: 0px; bottom: 3px;"><div class="ps-scrollbar-x" style="left: 0px; width: 0px;"></div></div><div class="ps-scrollbar-y-rail" style="top: 0px; right: 0px;"><div class="ps-scrollbar-y" style="top: 0px; height: 0px;"></div></div>
            </nav>
            <!-- /main navigation -->
        </div>
        <!-- /sidebar panel -->
        <!-- content panel -->
        <div class="main-panel">
            <!-- top header -->
            <header class="header navbar">
                <div class="brand visible-xs">
                    <!-- toggle offscreen menu -->
                    <div class="toggle-offscreen">
                        <a href="#" class="hamburger-icon visible-xs" data-toggle="offscreen" data-move="ltr">
                            <span></span>
                            <span></span>
                            <span></span>
                        </a>
                    </div>

                </div>
                <ul class="nav navbar-nav">
                    <li class="menu-support">
                        <img class="hidden-xs" src="">
                        <div>
                            Hỗ trợ, tư vấn dành cho ứng viên.
                            <br>
                            <i class="fal fa-phone-alt"></i> <a href="tel: ">(0272) 3871 711 - 3635 223</a>
                            <i class="fal fa-envelope" style="margin-left: 10px"></i> <a href="mailto:vieclam@vieclamlongan.vn">vieclam@vieclamlongan.vn</a>
                        </div>
                    </li>
                </ul>
                <ul class="nav navbar-nav navbar-right">
                    <li class="menu-ntd">
                        <a href="/">
                            <i class="fal fa-home-alt"></i>
                            <br>
                            Trang chủ
                        </a>
                    </li>

                    <li class="menu-ntd">
                        <a href="/UserProfile/HSTDCreateView">
                            <i class="fal fa-id-card"></i>
                            <br>
                            Tạo hồ sơ tuyển dụng
                        </a>
                    </li>


                </ul>
            </header>
            <!-- /top header -->
            <style>
                .alert {
                    margin-bottom: 10px;
                }
            </style>
            <!-- main area -->
            <div class="main-content">

                <div id="panelContent">
                    <div class="panel">
                        <div class="panel-heading">
                            <span>Thay đổi thông tin doanh nghiệp</span>
                        </div>
                        <div class="panel-body">
                            <div class="row">
                                @using (Html.BeginForm("EditDN", "UserProfile", FormMethod.Post))
                                {


                                    <div class="col-md-6 col-sm-6 col-xs-12 mb20">
                                        <label class="control-label">Tên doanh nghiệp: <span class="required">(*)</span></label>
                                        <div class="">
                                            <input type="text" name="dnname" id="dnname" class="form-control" value="@doanhnghiep.TenDoanhNghiep" required>
                                        </div>
                                    </div>
                                    <div class="col-md-6 col-sm-6 col-xs-12 mb20">
                                        <label class="control-label">Mã số thuế: <span class="required">(*)</span></label>
                                        <div class="">
                                            @{
                                                if (true)
                                                {
                                                    <input type="text" name="msthue" id="msthue" class="form-control" value="@doanhnghiep.MaSoThue" required>
                                                }
                                                else
                                                {
                                                    <input type="text" name="msthue" id="msthue" class="form-control" placeholder="Không" required>
                                                }
                                            }

                                        </div>
                                    </div>
                                    <div class="col-md-6 col-sm-6 col-xs-12 mb20">
                                        <label class="control-label">Loại hình doanh nghiệp: <span class="required">(*)</span></label>
                                        <div class="">
                                            <select class="question-select1 selectFilter" style="border-radius:0px;" name="loaihinh" id="loaihinh" size="1" tabindex="-1" required>
                                                <option value="@doanhnghiep.LoaiHinh.Id">@doanhnghiep.LoaiHinh.TenLoaiHinh</option>
                                                @{
                                                    for (int i = 0; i < loaihinh.Count; i++)
                                                    {
                                                        <option value="@loaihinh[i].Id" class="childAttr">@loaihinh[i].TenLoaiHinh</option>
                                                    }
                                                }
                                            </select>
                                        </div>
                                    </div>
                                    <div class="col-md-6 col-sm-6 col-xs-12 mb20">
                                        <label class="control-label">Ngành kinh tế: <span class="required">(*)</span></label>
                                        <div class="">
                                            <select class="question-select1 selectFilter nganhkinhte" style="border-radius:0px;" name="nkte" id="nkte" size="1" tabindex="-1" required>
                                                <option value="@doanhnghiep.NganhKinhTe.Id">@doanhnghiep.NganhKinhTe.TenNganhKinhTe</option>
                                                @{
                                                    for (int i = 0; i < nganhkinhte.Count; i++)
                                                    {
                                                        <option value="@nganhkinhte[i].Id" class="childAttr">@nganhkinhte[i].TenNganhKinhTe</option>
                                                    }
                                                }
                                            </select>
                                        </div>
                                    </div>
                                    <div class="col-md-6 col-sm-6 col-xs-12 mb20">
                                        <label class="control-label">Kinh doanh sản xuất: <span class="required">(*)</span></label>
                                        <div class="">
                                            <input type="text" name="kdsx" id="kdsx" class="form-control " value="@doanhnghiep.KinhDoanhSanXuat" required>
                                        </div>
                                    </div>
                                    <div class="col-md-6 col-sm-6 col-xs-12 mb20">
                                        <label class="control-label"><span>*</span>Tổng số lao động:</label>
                                        <div class="">
                                            @{
                                                if (doanhnghiep.TongSoLaoDong != null)
                                                {
                                                    <input type="number" name="tsld" id="tsld" class="form-control" value="@doanhnghiep.TongSoLaoDong">

                                                }
                                                else
                                                {
                                                    <input type="number" name="tsld" id="tsld" class="form-control" placeholder="Tổng số lao động">
                                                }
                                            }
                                        </div>
                                    </div>
                                    <div class="col-md-6 col-sm-6 col-xs-12 mb20">
                                        <label class="control-label">Năm hoạt động: <span class="required">(*)</span></label>
                                        <div class="">
                                            <input type="number" name="namhd" id="namhd" class="form-control" value="@doanhnghiep.NamHoatDong" required>
                                        </div>
                                    </div>
                                    <div class="col-md-6 col-sm-6 col-xs-12 mb20">
                                        <label class="control-label">Số điện thoại: <span class="required">(*)</span></label>
                                        <div class="">
                                            @{
                                                if (doanhnghiep.SoDienThoai != null)
                                                {
                                                    <input type="text" name="phone" id="phone" minlength="10" maxlength="10" class="form-control onlyNum" value="@doanhnghiep.SoDienThoai">

                                                }
                                                else
                                                {
                                                    <input type="text" name="phone" id="phone" minlength="10" maxlength="10" class="form-control onlyNum" value="Không">
                                                }
                                            }

                                        </div>
                                    </div>
                                    <div class="col-md-6 col-sm-6 col-xs-12 mb20">
                                        <label class="control-label">Email: <span class="required">(*)</span></label>
                                        <div class="">
                                            @{
                                                if (doanhnghiep.Email != null)
                                                {
                                                    <input type="email" name="email" id="email" class="form-control" value="@doanhnghiep.Email" required>
                                                }
                                                else
                                                {
                                                    <input type="email" name="email" id="email" class="form-control" placeholder="Email" required>
                                                }

                                            }

                                        </div>
                                    </div>
                                    <div class="col-md-6 col-sm-6 col-xs-12 mb20">
                                        <label class="control-label">Website:</label>
                                        <div class="">
                                            @{
                                                if (doanhnghiep.Website != null)
                                                {
                                                    <input type="email" name="website" id="website" class="form-control" value="@doanhnghiep.Website">
                                                }
                                                else
                                                {
                                                    <input type="email" name="website" id="website" class="form-control" placeholder="Website">
                                                }
                                            }

                                        </div>
                                    </div>
                                    <div class="col-md-6 col-sm-6 col-xs-12 mb20">
                                        <label class="control-label">Địa chỉ: <span class="required">(*)</span></label>
                                        <div class="">
                                            <input type="text" name="DiaChi" id="DiaChi" class="form-control" value="@doanhnghiep.DiaChi" required>
                                        </div>
                                    </div>

                                    <div class="col-md-6 col-sm-6 col-xs-12 mb20">
                                        <label class="control-label">Khu công nghiệp: <span class="required">(*)</span></label>
                                        <div class="">
                                            <select class="question-select1 selectFilter khucn" style="border-radius:0px;" name="kcn" id="kcn" size="1" tabindex="-1" required>
                                                <option value="@doanhnghiep.KhuCumCN.Id">@doanhnghiep.KhuCumCN.TenKhuCumCN</option>
                                                @{
                                                    for (int i = 0; i < kcn.Count; i++)
                                                    {
                                                        <option value="@kcn[i].Id" class="childAttr">@kcn[i].TenKhuCumCN</option>
                                                    }
                                                }
                                            </select>
                                        </div>
                                    </div>
                                    <div class="col-md-6 col-sm-6 col-xs-12 mb20">
                                        <label class="control-label">Tỉnh: <span class="required">(*)</span></label>
                                        <div class="">
                                            <select class="question-select1 selectFilter tinhes" style="border-radius:0px;" name="tinh" id="ddlProvince" required>
                                                <option value="@doanhnghiep.DiaChiTinh.Id">@doanhnghiep.DiaChiTinh.TenTinh</option>
                                                @*@{
                                                        for (int i = 0; i < tinh.Count; i++)
                                                        {
                                                            <option value="@tinh[i].Id" class="childAttr">@tinh[i].TenTinh</option>
                                                        }
                                                    }*@
                                            </select>
                                        </div>
                                    </div>
                                    <div class="col-md-6 col-sm-6 col-xs-12 mb20">
                                        <label class="control-label">Huyện: <span class="required">(*)</span></label>
                                        <div class="">
                                            <select class="question-select1 selectFilter" style="border-radius:0px;" name="huyen" id="ddlDistrict" required>
                                                <option value="@doanhnghiep.DiaChiHuyen.Id">@doanhnghiep.DiaChiHuyen.TenHuyen</option>
                                                @*@{
                                                        for (int i = 0; i < huyen.Count; i++)
                                                        {
                                                            <option value="@huyen[i].Id" class="childAttr">@huyen[i].TenHuyen</option>
                                                        }
                                                    }*@
                                            </select>
                                        </div>
                                    </div>

                                    <div class="text-center">
                                        <button class="btn btn-primary" id="btnSub">
                                            <i class="fad fa-check-circle"></i> Cập nhật
                                        </button>
                                    </div>
                                }


                            </div>
                        </div>
                    </div>
                    <script>

                    </script>
                </div>

            </div>
            <!-- /main area -->
        </div>
        <!-- /content panel -->

        <footer class="content-footer hidden-xs">
            <nav class="footer-left">
                <ul class="nav">
                    <li>
                        <a href="javascript:;">
                            Copyright <i class="fa fa-copyright"></i> <span>VNPT Long An | https://shop.vnptlongan.vn/ </span>
                            2021
                        </a>
                    </li>
                </ul>
            </nav>
        </footer>
        <!-- /bottom footer -->
    </div>


    <script type="text/javascript" src="~/Content/Assets/ungvien/js/bundle.js"></script>
    <script type="text/javascript" src="~/Content/Assets/ungvien/js/capnhathoso.js"></script>

    <div id="rememberry__extension__root" style="all: unset;"></div>
</body>
<script>
    var provinceUrl = "/UserProfile/GetAllProvinceByCountryId";
    var districtUrl = "/UserProfile/GetAllDistrictByProvinceId";
    var wardUrl = "/UserProfile/GetAllWardByDistrictId";
    $(document).ready(function () {
        // load danh sách country

        _getProvince();

        $("#ddlProvince").on('change', function () {
            var id = $(this).val();
            if (id != undefined && id != '') {
                _getDistrict(id);
                _getWard(id);
            }
        });
        $("#ddlDistrict").on('change', function () {
            var id = $(this).val();
            if (id != undefined && id != '') {
                _getWard(id);
            }
        });
        //$("#ddlWard").on('change', function () {

        //    var provinceText = $("#ddlProvince option:selected").text();
        //    var districtText = $("#ddlDistrict option:selected").text();
        //    var wardText = $("#ddlWard option:selected").text();
        //    var html = " Tỉnh thành: " + provinceText + " " + "Quận huyện: " + districtText + " " + "Xã phường: " + wardText;

        //    $("#divResult").html(html);
        //});
    });
    // truyền id của country vào
    function _getProvince() {
        $.get(provinceUrl, function (data) {
            if (data != null && data != undefined && data.length) {
                var html = '';
                html += '<option value="@doanhnghiep.DiaChiTinh.Id">@doanhnghiep.DiaChiTinh.TenTinh</option>';
                $.each(data, function (key, item) {
                    html += '<option value=' + item.Id + '>' + item.TenTinh + '</option>';
                });
                $("#ddlProvince").html(html);
            }
        });
    }
    // truyền id của province vào
    function _getDistrict(id) {
        $.get(districtUrl + "?id=" + id, function (data) {
            if (data != null && data != undefined && data.length) {
                var html = '';
                html += '<option value="">--Chọn huyện--</option>';
                $.each(data, function (key, item) {
                    html += '<option value=' + item.Id + '>' + item.TenHuyen + '</option>';
                });
                $("#ddlDistrict").html(html);
            }
        });
    }

    $(document).ready(function () {
        $('.khucn').select2({

        });
    });
    $(document).ready(function () {
        $('.nganhkinhte').select2({

        });
    });

    $(document).ready(function () {
        $('.tinhes').select2({

        });
    });
</script>
