@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@
@{
    Layout = "~/Views/Shared/_Frontend.cshtml";
    ViewData["Title"] = "DangKy";

    var dmTinh = ViewBag.DMTinh;

    var dmHuyen = ViewBag.DMHuyen;

    var dmNganhNghe = ViewBag.DMNganhNghe;

    var role = ViewBag.Role;

    var user = ViewBag.User;
}
<script src="https://www.google.com/recaptcha/api.js" async defer></script>

<link href="~/Content/Assets/css/bundle.css" rel="stylesheet" />
<script src="~/Content/Assets/js/bundle.js" type="text/javascript"></script>
<div class="body-view view-news">
    <div id="page-container">
        <div class="quick-menu">
            <div id="dnn_QickMenuPane" class="quick-menu-pane DNNEmptyPane"></div>
        </div>
        <div id="dnn_ContentPane" class="contentPane">
            <div class="DnnModule DnnModule-Dangky DnnModule-506">
                <a name="506"></a>
                <div id="dnn_ctr506_ContentPane">
                    <!-- Start_Module_506 -->
                    <div id="dnn_ctr506_ModuleContent" class="DNNModuleContent ModDangkyC">
                        <div id="dnn_ctr506_RegisterMember_UpdatePanel1">

                            <div style="clear: both;">
                            </div>
                            <div class="container-box-login">
                                <div class="blockin-login">
                                    <div class="text-login">
                                        <span class="text" id="dnn_ctr1730_dnnTITLE_titleLabel">Đăng ký tài khoản</span>
                                    </div>
                                </div>
                                <div style="clear: both;">
                                </div>
                                @using (Html.BeginForm("Register", "Home", FormMethod.Post))
                                {
                                    <div class="main" id="dnn_ctr1730_ContentPane">
                                        <div class="modulebox1">

                                            <div class="left register-content">
                                                <div class="register-notify">
                                                    <p class="register-notify-title">Chú ý</p>
                                                    <p class="register-notify-content">
                                                        - Để có thể đăng hồ sơ tại website Trung tâm Dịch vụ Việc làm, bạn phải có tài
                                                        khoản đăng nhập !<br>
                                                        - Bạn hãy điền đầy đủ các thông tin cần thiết ở dưới để hoàn tất việc đăng ký.<br>
                                                        <span class="txtHightLight">- Mật khẩu yêu cầu tối thiểu 7 kí tự.</span>
                                                    </p>
                                                </div>
                                                <div style="background-color: #3884AF; height: 1px;  -webkit-box-shadow: 2px 2px 18px rgba(39, 128, 160, 0.85);
                                    -moz-box-shadow: 2px 2px 18px rgba(39, 128, 160, 0.85); box-shadow: 2px 2px 18px rgba(39, 128, 160, 0.85);">
                                                </div>
                                                <br>

                                                <div id="dnn_ctr506_RegisterMember_ValidationSummary1" class="summary-errors" style="color:Red;display:none;">

                                                </div>
                                                <div class="blockrow borderrow">
                                                    <div class="t">
                                                        <div class="leftcol">
                                                            Địa chỉ Email <i class="txtHightLight">*</i>
                                                        </div>
                                                        <div class="rightcol">
                                                            <input name="Username" type="text" id="Username" class="textbox" style="width: 320px;" required onChange="checkemail();">
                                                            <div id="EmailInfo">
                                                                <span id="dnn_ctr506_RegisterMember_RegularExpressionValidator1" style="color:Red;visibility:hidden;">Email không được để trống !</span>
                                                            </div>
                                                        </div>
                                                        <div id="checkemail"></div>
                                                        <div class="clear">
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="blockrow borderrow">
                                                    <div class="t">
                                                        <div class="leftcol">
                                                            Họ và tên <i class="txtHightLight">*</i>
                                                        </div>
                                                        <div class="rightcol">
                                                            <input name="Fullname" type="text" id="Fullname" class="textbox" style="width: 320px;" required>
                                                            <div id="EmailInfo">
                                                                <span id="dnn_ctr506_RegisterMember_RequiredFieldValidator5" style="color:Red;visibility:hidden;">*</span>
                                                                <span id="dnn_ctr506_RegisterMember_RegularExpressionValidator1" style="color:Red;visibility:hidden;">Họ và tên không được để trống !</span>
                                                            </div>
                                                        </div>
                                                        
                                                        <div class="clear">
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="blockrow">
                                                    <div class="leftcol">
                                                        Mật khẩu &nbsp;<i class="txtHightLight">*</i>
                                                    </div>
                                                    <div class="rightcol">
                                                        <input name="Password" type="password" id="Password" class="textbox" style="width: 320px;" minlength="7" required onChange="checkPasswordMatch();">
                                                        <div id="passwordInfo">
                                                            <span id="dnn_ctr506_RegisterMember_RequiredFieldValidator1" style="color:Red;visibility:hidden;">*</span>
                                                            <span id="dnn_ctr506_RegisterMember_reg21" style="color:Red;visibility:hidden;">*</span>
                                                        </div>
                                                    </div>
                                                    <div class="clear">
                                                    </div>
                                                </div>

                                                <div class="blockrow">
                                                    <div class="leftcol">
                                                        Nhắc lại mật khẩu  <i class="txtHightLight">*</i>
                                                    </div>
                                                    <div class="rightcol">
                                                        <input name="PasswordConfirm" type="password" id="PasswordConfirm" class="textbox" style="width: 320px;" required onChange="checkPasswordMatch();">

                                                        <div id="passwordConfirmInfo">
                                                            <span id="dnn_ctr506_RegisterMember_RequiredFieldValidator2" style="color:Red;visibility:hidden;">*</span>
                                                            <span id="dnn_ctr506_RegisterMember_CompareValidator1" style="color:Red;visibility:hidden;">*</span>
                                                        </div>
                                                    </div>
                                                    <div class="rightcol">
                                                        <div id='CheckPasswordMatch'></div>
                                                    </div>
                                                    <div class="clear">
                                                    </div>
                                                </div>
                                                @*<div class="blockrow">
                                                        <div class="leftcol">
                                                            Tên đầy đủ <i class="txtHightLight">*</i>
                                                        </div>
                                                        <div class="rightcol">
                                                            <input name="FullName" type="text" maxlength="25" id="FullName" class="textbox" style="width: 320px;" required>
                                                            <span id="dnn_ctr506_RegisterMember_RequiredFieldValidator3" style="color:Red;visibility:hidden;">*</span>
                                                        </div>
                                                        <div class="clear">
                                                        </div>
                                                    </div>

                                                    <div class="blockrow">
                                                        <div class="leftcol">
                                                            Điện thoại  <i class="txtHightLight">*</i>
                                                        </div>
                                                        <div class="rightcol">
                                                            <input name="Phone" type="text" maxlength="25" id="Phone" class="textbox" style="width: 320px;">
                                                            <span id="dnn_ctr506_RegisterMember_RequiredFieldValidator8" style="color:Red;visibility:hidden;">*</span>
                                                        </div>
                                                        <div class="clear">
                                                        </div>
                                                    </div>*@
                                                @*<div class="blockrow borderrow">
                                                        <div class="t">
                                                            <div class="leftcol">Địa chỉ (tỉnh huyện xã) &nbsp;<i class="txtHightLight">*</i></div>
                                                            <div class="rightcol address-wrapper">

                                                                <div id="dnn_ctr506_RegisterMember_UpdatePanel2">
                                                                    @{

                                                                        <select name="ProvinceID" onchange="" id="ProvinceID" class="chzn-results">
                                                                            <option selected="selected" value="-2">Chọn Tỉnh/Tp</option>
                                                                            @{
                                                                                foreach (var item in dmTinh)
                                                                                {
                                                                                    <option value="@item.Id">@item.TenTinh</option>

                                                                                }

                                                                            }


                                                                        </select>
                                                                    }
                                                                    <span id="dnn_ctr506_RegisterMember_CompareValidator3" style="color:Red;visibility:hidden;">*</span>
                                                                    <select name="DistrictID" onchange="" id="DistrictID" class="chzn-results">
                                                                        <option selected="selected" value="-2">Chọn quận huyện</option>
                                                                        @{
                                                                            foreach (var item in dmHuyen)
                                                                            {
                                                                                <option value="@item.Id">@item.TenHuyen</option>
                                                                            }
                                                                        }


                                                                    </select>
                                                                    @
                                                                    <span id="dnn_ctr506_RegisterMember_RequiredFieldValidator17" style="color:Red;visibility:hidden;">*</span>


                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>

                                                    <div class="blockrow borderrow">
                                                        <div class="t">
                                                            <div class="leftcol">Địa chỉ chi tiết  <i class="txtHightLight">*</i></div>
                                                            <div class="rightcol">
                                                                <input name="dnn$ctr506$RegisterMember$txtMoreAddress" type="text" id="dnn_ctr506_RegisterMember_txtMoreAddress" class="textbox" style="width: 320px;">
                                                                <span id="dnn_ctr506_RegisterMember_RequiredFieldValidator6" style="color:Red;visibility:hidden;">*</span>

                                                            </div>
                                                        </div>
                                                    </div>*@

                                                <div class="blockrow borderrow">
                                                    <div class="t">
                                                        <div class="leftcol">
                                                            Lựa chọn loại tài khoản &nbsp;<i class="txtHightLight">*</i>
                                                        </div>
                                                        <div class="rightcol">
                                                            <select class="form-control " name="Role" id="Role" required>
                                                                <option value="">Chọn loại tài khoản</option>
                                                                @{
                                                                    foreach (var item in role)
                                                                    {
                                                                        if (item.Id > 2)
                                                                        {
                                                                            <option value="@item.Id">@item.RoleName</option>
                                                                        }


                                                                    }
                                                                }
                                                            </select>

                                                        </div>
                                                        <div class="clear">
                                                        </div>
                                                    </div>
                                                    <div class="clear">
                                                    </div>
                                                </div>
                                                <div class="blockrow borderrow">
                                                    <div class="t">
                                                        <div class="g-recaptcha" id="ReCaptchContainer"></div>
                                                        <div class="clear">
                                                        </div>
                                                    </div>
                                                    <label id="lblMessage" runat="server" clientidmode="static"></label>
                                                    <script src="https://www.google.com/recaptcha/api.js?onload=renderRecaptcha&render=explicit" async defer></script>
                                                    <div class="clear">
                                                    </div>
                                                </div>
                                                <div class="modulebox space_30">
                                                    @*<p class="register-notify-title">
                                                            Quy định
                                                        </p>*@
                                                    <div style="background-color: #3884AF; height: 1px; margin-top: 5px; margin-bottom: 10px;
                                            -webkit-box-shadow: 2px 2px 18px rgba(39, 128, 160, 0.85); -moz-box-shadow: 2px 2px 18px rgba(39, 128, 160, 0.85);
                                            box-shadow: 2px 2px 18px rgba(39, 128, 160, 0.85);">
                                                    </div>

                                                    <div class="footSubmit">
                                                        <div class="group">

                                                            <button type="submit" id="butonsubmit" class="btnSan btnRegis" style="font-weight: bold; height: 33px; width: 142px;line-height: 22px;" disabled="disabled">Đăng Ký</button>
                                                            <input type="reset" style="font-weight: bold; height: 33px; width: 132px; line-height: 22px;" class="btnAdd btnRegis" value="Hủy bỏ tất cả">
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="Infor">
                                                <div>
                                                    <p class="ttvl-name">
                                                        <span id="dnn_ctr1730_Main_Register_lblName">
                                                            Trung Tâm Dịch Vụ Việc Làm Long An
                                                        </span>
                                                    </p>
                                                    <p>Sở Lao Động Thương Binh Và Xã Hội Long An</p>
                                                    <div style="clear: both; margin-top: 10px;">
                                                    </div>
                                                    <table class="table1">
                                                        <tbody>
                                                            @*<tr style="height: 50px">
                                                                    <td style="vertical-align: middle;">
                                                                        <img src="/Images/Image1.png" style="vertical-align: bottom;" title="" alt="">
                                                                    </td>
                                                                    <td style="width: 10px;"></td>
                                                                    <td>
                                                                        <div class="lstRow1">
                                                                            • <span style="font-weight: bold;">
                                                                                90431
                                                                            </span> việc
                                                                            tìm người
                                                                            <br>
                                                                            • <span style="font-weight: bold;">
                                                                                125806
                                                                            </span> người
                                                                            tìm việc.
                                                                        </div>
                                                                    </td>
                                                                </tr>*@
                                                            <tr style="height: 50px">
                                                                <td style="vertical-align: middle;">
                                                                    <img src="~/Content/Assets/images/Image2.png" title="" alt="">
                                                                </td>
                                                                <td style="width: 10px;"></td>
                                                                <td>
                                                                    <div class="lstRow1">
                                                                        Nhận thông báo Người tìm việc - Việc tìm người mỗi ngày
                                                                    </div>
                                                                </td>
                                                            </tr>
                                                            <tr style="height: 40px">
                                                                <td>
                                                                    <img src="~/Content/Assets/images/Image3.png" title="" alt="">
                                                                </td>
                                                                <td style="width: 10px;"></td>
                                                                <td>
                                                                    <div class="lstRow1">
                                                                        Tham gia sàn giao dịch việc làm
                                                                    </div>
                                                                </td>
                                                            </tr>
                                                            <tr style="height: 40px">
                                                                <td colspan="3">
                                                                    <a style="display: inline-block; height: 31px;" href="/SanVL" class="btnSan" id="dnn_ctr1730_Main_Register_hylSanGD">
                                                                        <b style="text-transform: uppercase;">
                                                                            Sàn giao
                                                                            dịch việc làm
                                                                        </b>
                                                                    </a>
                                                                </td>
                                                            </tr>
                                                        </tbody>
                                                    </table>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                }
                                @*<form id="mainForm" name="mainForm"></form>*@

                            </div>
                            <div style="text-align: center;">
                                <div id="dnn_ctr506_RegisterMember_UpdateProgress1" style="display:none;" role="status" aria-hidden="true">

                                    <div class="Loading">
                                    </div>

                                </div>
                            </div>
                            <div style="clear: both;">
                            </div>

                        </div>

                    </div><!-- End_Module_506 -->
                </div>
            </div>
        </div>
        <div class="clear">
        </div>
    </div>
</div>
<script>
    
</script>
<script>
    
    function checkPasswordMatch() {
        var password = $("#Password").val();
        var confirmPassword = $("#PasswordConfirm").val();

        if (password != confirmPassword) {
            $("#CheckPasswordMatch").html("Mật khẩu xác nhận chưa đúng").css('color', 'red');
            //document.getElementById("butonsubmit").disabled = true;
            var element = document.getElementById("butonsubmit");
            element.classList.remove("passworded");
        }
        else if (password == confirmPassword) {
            $("#CheckPasswordMatch").html("Mật khẩu xác nhận chính xác.").css('color', 'green');
            var element = document.getElementById("butonsubmit");
            element.classList.add("passworded");
        }
           


        if (password == "" && confirmPassword == "") {
            $("#CheckPasswordMatch").html("");
        }
    }

    $(document).ready(function () {
        $("#PasswordConfirm").keyup(checkPasswordMatch);
    });
    
    var renderRecaptcha = function () {
        grecaptcha.render('ReCaptchContainer', {
            'sitekey': '6Le2e2cdAAAAAIyI3d3bknMSbqencscv2jVb9mUr',
            'callback': reCaptchaCallback,
            theme: 'light', //light or dark
            type: 'image',// image or audio
            size: 'normal'//normal or compact
        });
       
    };

    var reCaptchaCallback = function (response) {
        if (response !== '') {
            jQuery('#lblMessage').css('color', 'green').html('Success');
        }
        //document.getElementById("butonsubmit").disabled = false;
        var element = document.getElementById("butonsubmit");
        element.classList.add("captchaed");
        document.getElementsByClassName("btnSan btnRegis mailed passworded captchaed")[0].disabled = false;
    };

    jQuery('button[type="submit"]').click(function (e) {
        var message = 'Please checck the checkbox';
        if (typeof (grecaptcha) != 'undefined') {
            var response = grecaptcha.getResponse();
            (response.length === 0) ? (message = 'Captcha verification failed') : (message = 'Success!');
        }
        jQuery('#lblMessage').html(message);
        jQuery('#lblMessage').css('color', (message.toLowerCase() == 'success!') ? "green" : "red");
    });


    var checkEmail = "/Home/Checkemail";

    function checkemail() {
        var email = $("#Username").val();
        if (email != "") {
            _checkEmail(email);
        }
        else if (email == "") {
            $("#checkemail").html("");
        }

    }

    function _checkEmail(id) {
        $.get(checkEmail + "?email=" + id, function (data) {
            if (data != null) {

                if (data == true) {

                    $("#checkemail").html("Email đã đăng ký").css('color', 'red');
                    var element = document.getElementById("butonsubmit");
                    element.classList.remove("mailed");
                }
                else if (data == false) {
                    $("#checkemail").html("Email có thể sử dụng.").css('color', 'green');
                    var element = document.getElementById("butonsubmit");
                    element.classList.add("mailed");
                }

              
            }
        });
    }
    
</script>
